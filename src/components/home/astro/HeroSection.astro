---
import { heroSectionData } from "@/data/heroSectionData";
import GetReviewSectionHeader from "./GetReviewSectionHeader.astro";
import { Image } from "astro:assets";
import MobileHeroImage from "@/assets/images/mob-hero.webp";
import ContactFormPopupController from "../react/ContactFormPopupController";
---

<section class="flex lg:flex-row flex-col mt-0 gap-4 lg:gap-0 md:mt-[70px]">
  <div class="lg:hidden">
    <Image src={MobileHeroImage} alt="hero-section" />
  </div>
  <div class="flex-1">
    <div
      class="pl-4 xl:ml-auto text-white w-full pb-4 pr-4 lg:pr-0 lg:max-w-[582px] mr-0 lg:mr-[36px]"
    >
      <h1
        class="text-4xl md:text-5xl bg-text-gradient bg-clip-text font-Frank text-transparent leading-[42px] md:leading-[64px]"
      >
        Begin Your Path to Recovery with a <span
          class="font-medium bg-clip-text font-Frank text-transparent"
          >Safe & Comfortable Medical Detox</span
        >
      </h1>
      <p
        class="text-base md:text-xl !leading-[34px] font-medium text-secondary max-w-[498px]"
      >
        {heroSectionData.subheading}
      </p>

      <div class="flex flex-col-reverse sm:flex-row mt-7 gap-[10px]">
        <div>
          <div
            id="verifyBtn"
            class="group shadow-btn-custom text-center cursor-pointer py-4 sm:py-[2px] rounded-full px-6 lg:min-w-[222px] w-full bg-transparent hover:bg-[#f59e0b] hover:text-white hover:border-[#f59e0b] transition-colors border-2 border-[#FBBF24] leading-6"
          >
            <p
              class="group-hover:bg-none group-hover:text-[#1F2937] text-sm md:text-base bg-text-gradient bg-clip-text text-transparent font-medium md:font-semibold"
            >
              {heroSectionData.insuranceBtnText}
            </p>
            <span
              class="group-hover:bg-none group-hover:text-[#1F2937] text-sm md:text-base bg-text-gradient bg-clip-text text-transparent font-medium md:font-semibold"
              >{heroSectionData.insuranceBtnDes}</span
            >
          </div>
        </div>

        <div>
          <a href={`tel:${heroSectionData.contactNumber}`}>
            <div
              class="relative flex py-5 justify-center sm:justify-start sm:py-1 md:py-3 px-3 md:px-6 rounded-full bg-[#FBBF24] text-[#1F2937] overflow-hidden transition-all duration-300 ease-in-out items-center gap-1 md:gap-3 group"
            >
              <div
                class="absolute inset-0 bg-[#f59e0b] scale-x-0 group-hover:scale-x-100 origin-left transition-transform duration-300 ease-in-out"
              >
              </div>

              <div class="relative flex items-center gap-1 md:gap-3 z-10">
                <svg
                  width="23"
                  height="21"
                  viewBox="0 0 23 21"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  class="transition-transform duration-300 ease-in-out group-hover:scale-110"
                >
                  <path
                    d="M6.8786 1.55176C7.43615 1.55176 9.66637 6.166 9.66637 6.67869C9.66637 7.70408 7.9937 8.72946 7.43615 9.75485C6.8786 10.7802 7.9937 11.8056 9.10881 12.831C9.5437 13.2309 11.339 14.8818 12.4541 14.3691C13.5692 13.8564 14.6844 12.3183 15.7995 12.3183C16.357 12.3183 21.375 14.3691 21.375 14.8818C21.375 16.9326 19.7023 18.4706 18.0297 18.9833C16.357 19.496 15.2419 19.496 13.0117 18.9833C10.7815 18.4706 9.10881 17.9579 6.32104 15.3945C3.53327 12.831 2.97572 11.2929 2.41817 9.24216C1.86061 7.19138 1.86061 6.166 2.41817 4.62792C2.97572 3.08984 4.64838 1.55176 6.8786 1.55176Z"
                    stroke="currentColor"
                    stroke-width="2.23022"
                    stroke-linecap="round"
                    stroke-linejoin="round"></path>
                  <path
                    d="M13.5692 5.69421C14.3052 6.01208 14.9743 6.44275 15.5318 6.96569C16.0782 7.46813 16.5354 8.07311 16.87 8.72936"
                    stroke="currentColor"
                    stroke-width="2.23022"
                    stroke-linecap="round"
                    stroke-linejoin="round"></path>
                  <path
                    d="M14.6843 1.80798C16.2566 2.18738 17.6617 2.93591 18.7768 3.9613C19.8807 4.98668 20.6948 6.26842 21.0962 7.70396"
                    stroke="currentColor"
                    stroke-width="2.23022"
                    stroke-linecap="round"
                    stroke-linejoin="round"></path>
                </svg>

                <div class="transition-all duration-300 ease-in-out">
                  <p class="text-base md:text-sm font-bold">
                    {heroSectionData.helpText}
                  </p>
                  <p
                    class="text-sm md:text-xs font-medium md:font-semibold leading-6"
                  >
                    {heroSectionData.contactNumber}
                  </p>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>

      <p
        class="font-medium my-5 text-text text-center lg:text-left text-sm lg:text-base"
      >
        {heroSectionData.reviewheading}
      </p>
      <GetReviewSectionHeader />
    </div>
  </div>
  <div class="flex-1 hero-section bg-right bg-contain bg-no-repeat"></div>

  <!-- Add the React component with client:load directive -->
  <ContactFormPopupController
    client:load
    contactNumber={heroSectionData.contactNumber}
  />
</section>

<style>
  .hero-section {
    background-image: url("../../../assets/images/banner.svg");
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const verifyBtn = document.getElementById("verifyBtn");

    if (verifyBtn) {
      verifyBtn.addEventListener("click", (e) => {
        e.preventDefault();

        if (window.innerWidth <= 768) {
          // On mobile: Open phone dialer
          const contactNumber = "85587153321";
          window.location.href = `tel:${contactNumber}`;
        } else {
          // On desktop: Dispatch custom event to open the React popup
          document.dispatchEvent(new CustomEvent("openContactFormPopup"));
        }
      });
    }
  });
</script>
